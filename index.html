<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>BiztonsÃ¡gi Tracker</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #2c2f33; color: white; padding: 50px; }
        .btn { background: #7289da; border: none; padding: 15px; color: white; border-radius: 5px; cursor: pointer; }
        #status { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ğŸ›¡ï¸ BiztonsÃ¡gi KÃ¶vetÃ©s</h1>
    <p>A gomb megnyomÃ¡sÃ¡val a csoport tagjai lÃ¡tni fogjÃ¡k a helyzetedet.</p>
    <button class="btn" onclick="startTracking()">KÃ¶vetÃ©s indÃ­tÃ¡sa</button>
    <div id="status">KÃ©szen Ã¡ll...</div>

    <script>
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1462078767714275390/OUrLAeGu-Pby2mR1yzW6camLFAjmMazqfvQ7Xl66H-sG0QcZetakhtix8uMKIOvF6L2h";
        let userName = prompt("Mi a Discord felhasznÃ¡lÃ³d!");

        function startTracking() {
            if (navigator.geolocation) {
                // watchPosition: folyamatosan kÃ¶vet, ha elmozdul a telefon
                navigator.geolocation.watchPosition(sendToDiscord, handleError, {
                    enableHighAccuracy: true,
                    maximumAge: 30000,
                    timeout: 27000
                });
                document.getElementById("status").textContent = "ğŸ”´ KÃ¶vetÃ©s aktÃ­v...";
            }
        }

        function sendToDiscord(position) {
    const lat = position.coords.latitude;
    const lon = position.coords.longitude;

    // CÃ­m lekÃ©rÃ©se a koordinÃ¡tÃ¡k alapjÃ¡n
    fetch(`https://api.bigdatacloud.net{lat}&longitude=${lon}&localityLanguage=hu`)
    .then(res => res.json())
    .then(data => {
        const address = data.locality + ", " + (data.principalSubdivision || "") + " " + (data.city || "");
        
        const payload = {
            content: `ğŸ“¢ **${userName}** helyzete:\nğŸ  CÃ­m: **${address}**\nğŸ“ Pontos koordinÃ¡ta: ${lat}, ${lon}\nğŸ”— [Google Maps megnyitÃ¡sa](https://www.google.com{lat},${lon})`
        };

        fetch(DISCORD_WEBHOOK, {
            method: "POST",
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });
    });
}

        function handleError(err) {
            console.warn(`Hiba (${err.code}): ${err.message}`);
        }
    </script>
</body>

</html>


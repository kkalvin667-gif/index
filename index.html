<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeGroup Tracker 2026</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background: #23272a; color: white; padding: 20px; }
        .container { background: #2c2f33; padding: 30px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.3); max-width: 400px; margin: auto; }
        .btn { background: #5865f2; border: none; padding: 15px 30px; color: white; font-weight: bold; border-radius: 10px; cursor: pointer; font-size: 18px; transition: 0.3s; margin-top: 20px; }
        .btn:hover { background: #4752c4; transform: scale(1.05); }
        #status { margin-top: 20px; color: #b9bbbe; font-style: italic; font-size: 14px; }
        .info { font-size: 12px; color: #f04747; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ°Ô∏è SafeGroup</h1>
        <p>Folyamatos biztons√°gi k√∂vet√©s</p>
        
        <button class="btn" onclick="startAutoTracking()">K√ñVET√âS IND√çT√ÅSA</button>
        
        <div id="status">V√°rakoz√°s az ind√≠t√°sra...</div>
        <p class="info">Figyelem: A k√©perny≈ët ne z√°rd le a pontos k√∂vet√©shez!</p>
    </div>

    <script>
        // FONTOS: IDE M√ÅSOLD A WEBHOOK URL-EDET!
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1462078788853698712/9m8atZ32hIGG_KKFyKsr_7ZKslgPMtPDzLC5ZrZhuyj-Dybh3ZJb_-yi45Z9VebGrCDD";
        
        let userName = prompt("Add meg a neved:", "Bar√°t");
        if(!userName) userName = "Ismeretlen";

        function startAutoTracking() {
            if (navigator.geolocation) {
                // watchPosition: Folyamatosan figyel √©s k√ºld, ha elmozdul a telefon
                navigator.geolocation.watchPosition(updateLocation, handleError, {
                    enableHighAccuracy: true,
                    maximumAge: 0,
                    timeout: 20000
                });
                document.getElementById("status").innerHTML = "üî¥ <b>K√∂vet√©s akt√≠v...</b><br>Adatok k√ºld√©se a Discordra.";
            } else {
                alert("Hiba: A b√∂ng√©sz≈ëd nem t√°mogatja a GPS-t!");
            }
        }

        function updateLocation(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            const accuracy = Math.round(position.coords.accuracy);

            // Google Maps link pontos form√°tuma
            const googleLink = `https://www.google.com{lat},${lon}`;

            // Discord √ºzenet √∂ssze√°ll√≠t√°sa
            const payload = {
                embeds: [{
                    title: `üìç ${userName} mozg√°sban van`,
                    description: `**Google Maps:** [Megnyit√°s t√©rk√©pen](${googleLink})\n**Pontoss√°g:** ${accuracy} m√©ter`,
                    color: 5763719, // Z√∂ld sz√≠n
                    timestamp: new Date().toISOString(),
                    footer: { text: "SafeGroup v2026 - Automatikus friss√≠t√©s" }
                }]
            };

            // K√ºld√©s a Discordra (mode: 'no-cors' a mobil stabilit√°s√©rt)
            fetch(DISCORD_WEBHOOK, {
                method: "POST",
                headers: { 'Content-Type': 'application/json' },
                mode: 'no-cors', 
                body: JSON.stringify(payload)
            }).then(() => {
                console.log("Sikeres k√ºld√©s: " + lat + "," + lon);
                document.getElementById("status").innerHTML = "üî¥ <b>K√∂vet√©s akt√≠v...</b><br>Utols√≥ friss√≠t√©s: " + new Date().toLocaleTimeString();
            }).catch(err => {
                console.error("Discord hiba: ", err);
            });
        }

        function handleError(err) {
            let msg = "GPS hiba: ";
            if (err.code === 1) msg += "Nincs enged√©ly (kapcsold be a GPS-t a b√∂ng√©sz≈ëben!)";
            else if (err.code === 2) msg += "Nincs t√©rer≈ë / GPS jel.";
            else if (err.code === 3) msg += "Id≈ët√∫ll√©p√©s.";
            
            document.getElementById("status").textContent = msg;
            console.warn(msg, err);
        }
    </script>
</body>
</html>







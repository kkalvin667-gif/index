<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biztons√°gi Tracker 2026</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background: #23272a; color: white; padding: 20px; }
        .container { background: #2c2f33; padding: 30px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.3); max-width: 400px; margin: auto; }
        .btn { background: #57f287; border: none; padding: 15px 30px; color: black; font-weight: bold; border-radius: 10px; cursor: pointer; font-size: 18px; transition: 0.3s; }
        .btn:hover { background: #3ba55c; transform: scale(1.05); }
        #status { margin-top: 20px; color: #b9bbbe; font-style: italic; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ°Ô∏è SafeGroup</h1>
        <p>A gomb megnyom√°s√°val megosztod a helyzeted a csoporttal.</p>
        <button class="btn" onclick="startTracking()">K√ñVET√âS IND√çT√ÅSA</button>
        <div id="status">K√©szen √°ll a k√ºld√©sre...</div>
    </div>

    <script>
        // IDE M√ÅSOLD A DISCORD WEBHOOK URL-EDET!
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1462078767714275390/OUrLAeGu-Pby2mR1yzW6camLFAjmMazqfvQ7Xl66H-sG0QcZetakhtix8uMKIOvF6L2h";
        
        let userName = prompt("Add meg a neved a k√∂vet√©shez:", "Bar√°t");
        if(!userName) userName = "Ismeretlen";

        function startTracking() {
            if (navigator.geolocation) {
                // watchPosition figyeli a mozg√°st
                navigator.geolocation.watchPosition(updateLocation, handleError, {
                    enableHighAccuracy: true,
                    maximumAge: 0,
                    timeout: 10000
                });
                document.getElementById("status").textContent = "üî¥ K√∂vet√©s akt√≠v... Ne z√°rd be az ablakot!";
            } else {
                alert("A b√∂ng√©sz≈ëd nem t√°mogatja a GPS-t.");
            }
        }

        function updateLocation(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            const accuracy = Math.round(position.coords.accuracy);

            // 1. C√≠m lek√©r√©se (Reverse Geocoding)
            fetch(`https://api.bigdatacloud.net{lat}&longitude=${lon}&localityLanguage=hu`)
            .then(res => res.json())
            .then(data => {
                const address = data.city + ", " + (data.locality || "");
                sendToDiscord(lat, lon, address, accuracy);
            });
        }

        function sendToDiscord(lat, lon, address, accuracy) {
            const googleLink = `https://www.google.com{lat},${lon}`;
            const mapImage = `https://static-maps.yandex.ru{lon},${lat}&z=15&l=map&pt=${lon},${lat},pm2rdl`;

            const payload = {
                embeds: [{
                    title: `üìç ${userName} friss helyzete`,
                    description: `**C√≠m:** ${address}\n**Pontoss√°g:** ${accuracy} m√©ter`,
                    url: googleLink,
                    color: 5763719, // Z√∂ld sz√≠n
                    image: { url: mapImage }, // Itt a k√©p a t√©rk√©pr≈ël
                    timestamp: new Date().toISOString(),
                    footer: { text: "SafeGroup v2026 - Folyamatos friss√≠t√©s" }
                }]
            };

            fetch(DISCORD_WEBHOOK, {
                method: "POST",
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
        }

        function handleError(err) {
            console.warn("GPS hiba: " + err.message);
            document.getElementById("status").textContent = "Hiba t√∂rt√©nt a GPS lek√©r√©sekor.";
        }
    </script>
</body>
</html>



